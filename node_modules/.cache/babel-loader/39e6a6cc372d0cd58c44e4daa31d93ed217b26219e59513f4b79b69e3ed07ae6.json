{"ast":null,"code":"export const getURLParameters = function () {\n  let url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return (url.match(/([^?=&]+)(=([^&]*))/g) || []).reduce((a, v) => (a[v.slice(0, v.indexOf('='))] = v.slice(v.indexOf('=') + 1), a), {});\n};\nexport const prevChild = function () {\n  let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let index = arguments.length > 1 ? arguments[1] : undefined;\n  let i = index;\n  while (i > -1) {\n    i--;\n    if (!data[i]) return;\n    if (data[i] && data[i].value && data[i].value.replace(/(\\n|\\s)/g, '') !== '' || data[i].type !== 'text') {\n      if (!/^rehype:/.test(data[i].value) || data[i].type !== 'comment') return;\n      return data[i];\n    }\n  }\n  return;\n};\nexport const nextChild = function () {\n  let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let index = arguments.length > 1 ? arguments[1] : undefined;\n  let tagName = arguments.length > 2 ? arguments[2] : undefined;\n  let codeBlockParames = arguments.length > 3 ? arguments[3] : undefined;\n  let i = index;\n  while (i < data.length) {\n    i++;\n    if (tagName) {\n      const element = data[i];\n      if (element && element.value && element.value.replace(/(\\n|\\s)/g, '') !== '' || data[i] && data[i].type === 'element') {\n        return element.tagName === tagName ? element : undefined;\n      }\n    } else {\n      const element = data[i];\n      if (!element || element.type === 'element') return;\n      if (element.type === 'text' && element.value.replace(/(\\n|\\s)/g, '') !== '') return;\n      if (element.type && /^(comment|raw)$/ig.test(element.type)) {\n        if (element.value && !/^rehype:/.test(element.value.replace(/^(\\s+)?<!--(.*?)-->/, '$2') || '')) {\n          return;\n        }\n        ;\n        if (codeBlockParames) {\n          const nextNode = nextChild(data, i, 'pre', codeBlockParames);\n          if (nextNode) return;\n          element.value = (element.value || '').replace(/^(\\n|\\s)+/, '');\n          return element;\n        } else {\n          element.value = (element.value || '').replace(/^(\\n|\\s)+/, '');\n          return element;\n        }\n      }\n    }\n  }\n  return;\n};\n/**\n * 获取代码注视的位置\n * @param data 数据\n * @param index 当前数据所在的位置\n * @returns 返回 当前参数数据 Object，`{}`\n */\nexport const getCommentObject = _ref => {\n  let {\n    value = ''\n  } = _ref;\n  const param = getURLParameters(value.replace(/^<!--(.*?)-->/, '$1').replace(/^rehype:/, ''));\n  Object.keys(param).forEach(keyName => {\n    if (param[keyName] === 'true') {\n      param[keyName] = true;\n    }\n    if (param[keyName] === 'false') {\n      param[keyName] = false;\n    }\n    if (typeof param[keyName] === 'string' && !/^0/.test(param[keyName]) && !isNaN(+param[keyName])) {\n      param[keyName] = +param[keyName];\n    }\n  });\n  return param;\n};\nexport const propertiesHandle = (defaultAttrs, attrs, type) => {\n  if (type === 'string') {\n    return {\n      ...defaultAttrs,\n      'data-config': JSON.stringify({\n        ...attrs,\n        rehyp: true\n      })\n    };\n  } else if (type === 'attr') {\n    return {\n      ...defaultAttrs,\n      ...attrs\n    };\n  }\n  return {\n    ...defaultAttrs,\n    'data-config': {\n      ...attrs,\n      rehyp: true\n    }\n  };\n};","map":{"version":3,"names":["getURLParameters","url","arguments","length","undefined","match","reduce","a","v","slice","indexOf","prevChild","data","index","i","value","replace","type","test","nextChild","tagName","codeBlockParames","element","nextNode","getCommentObject","_ref","param","Object","keys","forEach","keyName","isNaN","propertiesHandle","defaultAttrs","attrs","JSON","stringify","rehyp"],"sources":["/Users/kanaiyuuta/Downloads/test-yuuta-main/node_modules/rehype-attr/src/utils.ts"],"sourcesContent":["import { Element, Comment, Literal, ElementContent, RootContent, Properties } from 'hast';\nimport { RehypeAttrsOptions } from './';\n\nexport const getURLParameters = (url: string = '') =>\n  ((url.match(/([^?=&]+)(=([^&]*))/g) || []) as string[]).reduce(\n      (a: Record<string, string | number | boolean>, v: string) => (\n        (a[v.slice(0, v.indexOf('=')) as keyof typeof a] = v.slice(v.indexOf('=') + 1)), a\n      ),\n      {}\n    )\n\nexport const prevChild = (data: Literal[] = [], index: number): Comment | undefined => {\n  let i = index;\n  while (i > -1) {\n    i--;\n    if (!data[i]) return\n    if ((data[i] && data[i].value && (data[i].value as string).replace(/(\\n|\\s)/g, '') !== '') || data[i].type !== 'text') {\n      if (!/^rehype:/.test(data[i].value as string) || (data[i].type as string) !== 'comment') return;\n      return data[i] as unknown as Comment;\n    }\n  }\n  return;\n}\n\nexport const nextChild = (data: RootContent[] | ElementContent[] = [], index: number, tagName?: string, codeBlockParames?: boolean): ElementContent | undefined => {\n  let i = index;\n  while (i < data.length) {\n    i++;\n    if (tagName) {\n      const element = data[i] as Literal & Element;\n      if (element && element.value && (element.value as string).replace(/(\\n|\\s)/g, '') !== '' || data[i] && (data[i].type as string) === 'element') {\n        return element.tagName === tagName ? element : undefined\n      }\n    } else {\n      const element = data[i] as ElementContent & Literal;\n      if (!element || element.type === 'element') return;\n      if (element.type === 'text' && element.value.replace(/(\\n|\\s)/g, '') !== '') return;\n      if (element.type && /^(comment|raw)$/ig.test(element.type)) {\n        if (element.value && !/^rehype:/.test(element.value.replace(/^(\\s+)?<!--(.*?)-->/, '$2') || '')) {\n          return\n        };\n        if (codeBlockParames) {\n          const nextNode = nextChild(data, i, 'pre', codeBlockParames)\n          if (nextNode) return;\n          element.value = (element.value || '').replace(/^(\\n|\\s)+/, '')\n          return element;\n        } else {\n          element.value = (element.value || '').replace(/^(\\n|\\s)+/, '')\n          return element;\n        }\n      }\n    }\n  }\n  return\n}\n\n/**\n * 获取代码注视的位置\n * @param data 数据\n * @param index 当前数据所在的位置\n * @returns 返回 当前参数数据 Object，`{}`\n */\nexport const getCommentObject = ({ value = '' }: Comment): Properties => {\n  const param = getURLParameters(value.replace(/^<!--(.*?)-->/, '$1').replace(/^rehype:/, ''));\n  Object.keys(param).forEach((keyName: string) => {\n    if (param[keyName] === 'true') {\n      param[keyName] = true;\n    }\n    if (param[keyName] === 'false') {\n      param[keyName] = false;\n    }\n    if (typeof param[keyName] === 'string' && !/^0/.test(param[keyName] as string) && !isNaN(+param[keyName])) {\n      param[keyName] = +param[keyName];\n    }\n  })\n  return param;\n}\n\nexport type DataConfig = {\n  'data-config': Properties\n}\n\nexport const propertiesHandle = (defaultAttrs?: Properties | null, attrs?: Properties, type?: RehypeAttrsOptions['properties']): Properties | DataConfig => {\n  if (type === 'string') {\n    return { ...defaultAttrs, 'data-config': JSON.stringify({ ...attrs, rehyp: true })}\n  } else if (type === 'attr') {\n    return { ...defaultAttrs, ...attrs}\n  }\n  return { ...defaultAttrs, 'data-config': { ...attrs, rehyp: true }}\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}