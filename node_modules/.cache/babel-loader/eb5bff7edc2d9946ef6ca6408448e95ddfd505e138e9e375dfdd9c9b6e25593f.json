{"ast":null,"code":"export function parseUnits(value, decimals) {\n  let [integer, fraction = '0'] = value.split('.');\n  const negative = integer.startsWith('-');\n  if (negative) integer = integer.slice(1);\n  // trim leading zeros.\n  fraction = fraction.replace(/(0+)$/, '');\n  // round off if the fraction is larger than the number of decimals.\n  if (decimals === 0) {\n    if (Math.round(Number(`.${fraction}`)) === 1) integer = `${BigInt(integer) + 1n}`;\n    fraction = '';\n  } else if (fraction.length > decimals) {\n    const [left, unit, right] = [fraction.slice(0, decimals - 1), fraction.slice(decimals - 1, decimals), fraction.slice(decimals)];\n    const rounded = Math.round(Number(`${unit}.${right}`));\n    if (rounded > 9) fraction = `${BigInt(left) + BigInt(1)}0`.padStart(left.length + 1, '0');else fraction = `${left}${rounded}`;\n    if (fraction.length > decimals) {\n      fraction = fraction.slice(1);\n      integer = `${BigInt(integer) + 1n}`;\n    }\n    fraction = fraction.slice(0, decimals);\n  } else {\n    fraction = fraction.padEnd(decimals, '0');\n  }\n  return BigInt(`${negative ? '-' : ''}${integer}${fraction}`);\n}","map":{"version":3,"names":["parseUnits","value","decimals","integer","fraction","split","negative","startsWith","slice","replace","Math","round","Number","BigInt","length","left","unit","right","rounded","padStart","padEnd"],"sources":["/Users/kanaiyuuta/Downloads/test-yuuta-main/node_modules/viem/utils/unit/parseUnits.ts"],"sourcesContent":["export function parseUnits(value: string, decimals: number) {\n  let [integer, fraction = '0'] = value.split('.')\n\n  const negative = integer.startsWith('-')\n  if (negative) integer = integer.slice(1)\n\n  // trim leading zeros.\n  fraction = fraction.replace(/(0+)$/, '')\n\n  // round off if the fraction is larger than the number of decimals.\n  if (decimals === 0) {\n    if (Math.round(Number(`.${fraction}`)) === 1)\n      integer = `${BigInt(integer) + 1n}`\n    fraction = ''\n  } else if (fraction.length > decimals) {\n    const [left, unit, right] = [\n      fraction.slice(0, decimals - 1),\n      fraction.slice(decimals - 1, decimals),\n      fraction.slice(decimals),\n    ]\n\n    const rounded = Math.round(Number(`${unit}.${right}`))\n    if (rounded > 9)\n      fraction = `${BigInt(left) + BigInt(1)}0`.padStart(left.length + 1, '0')\n    else fraction = `${left}${rounded}`\n\n    if (fraction.length > decimals) {\n      fraction = fraction.slice(1)\n      integer = `${BigInt(integer) + 1n}`\n    }\n\n    fraction = fraction.slice(0, decimals)\n  } else {\n    fraction = fraction.padEnd(decimals, '0')\n  }\n\n  return BigInt(`${negative ? '-' : ''}${integer}${fraction}`)\n}\n"],"mappings":"AAAA,OAAM,SAAUA,UAAUA,CAACC,KAAa,EAAEC,QAAgB;EACxD,IAAI,CAACC,OAAO,EAAEC,QAAQ,GAAG,GAAG,CAAC,GAAGH,KAAK,CAACI,KAAK,CAAC,GAAG,CAAC;EAEhD,MAAMC,QAAQ,GAAGH,OAAO,CAACI,UAAU,CAAC,GAAG,CAAC;EACxC,IAAID,QAAQ,EAAEH,OAAO,GAAGA,OAAO,CAACK,KAAK,CAAC,CAAC,CAAC;EAExC;EACAJ,QAAQ,GAAGA,QAAQ,CAACK,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC;EAExC;EACA,IAAIP,QAAQ,KAAK,CAAC,EAAE;IAClB,IAAIQ,IAAI,CAACC,KAAK,CAACC,MAAM,CAAC,IAAIR,QAAQ,EAAE,CAAC,CAAC,KAAK,CAAC,EAC1CD,OAAO,GAAG,GAAGU,MAAM,CAACV,OAAO,CAAC,GAAG,EAAE,EAAE;IACrCC,QAAQ,GAAG,EAAE;GACd,MAAM,IAAIA,QAAQ,CAACU,MAAM,GAAGZ,QAAQ,EAAE;IACrC,MAAM,CAACa,IAAI,EAAEC,IAAI,EAAEC,KAAK,CAAC,GAAG,CAC1Bb,QAAQ,CAACI,KAAK,CAAC,CAAC,EAAEN,QAAQ,GAAG,CAAC,CAAC,EAC/BE,QAAQ,CAACI,KAAK,CAACN,QAAQ,GAAG,CAAC,EAAEA,QAAQ,CAAC,EACtCE,QAAQ,CAACI,KAAK,CAACN,QAAQ,CAAC,CACzB;IAED,MAAMgB,OAAO,GAAGR,IAAI,CAACC,KAAK,CAACC,MAAM,CAAC,GAAGI,IAAI,IAAIC,KAAK,EAAE,CAAC,CAAC;IACtD,IAAIC,OAAO,GAAG,CAAC,EACbd,QAAQ,GAAG,GAAGS,MAAM,CAACE,IAAI,CAAC,GAAGF,MAAM,CAAC,CAAC,CAAC,GAAG,CAACM,QAAQ,CAACJ,IAAI,CAACD,MAAM,GAAG,CAAC,EAAE,GAAG,CAAC,MACrEV,QAAQ,GAAG,GAAGW,IAAI,GAAGG,OAAO,EAAE;IAEnC,IAAId,QAAQ,CAACU,MAAM,GAAGZ,QAAQ,EAAE;MAC9BE,QAAQ,GAAGA,QAAQ,CAACI,KAAK,CAAC,CAAC,CAAC;MAC5BL,OAAO,GAAG,GAAGU,MAAM,CAACV,OAAO,CAAC,GAAG,EAAE,EAAE;;IAGrCC,QAAQ,GAAGA,QAAQ,CAACI,KAAK,CAAC,CAAC,EAAEN,QAAQ,CAAC;GACvC,MAAM;IACLE,QAAQ,GAAGA,QAAQ,CAACgB,MAAM,CAAClB,QAAQ,EAAE,GAAG,CAAC;;EAG3C,OAAOW,MAAM,CAAC,GAAGP,QAAQ,GAAG,GAAG,GAAG,EAAE,GAAGH,OAAO,GAAGC,QAAQ,EAAE,CAAC;AAC9D"},"metadata":{},"sourceType":"module","externalDependencies":[]}